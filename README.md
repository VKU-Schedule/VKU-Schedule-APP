# VKU Schedule - Flutter App

á»¨ng dá»¥ng Flutter Ä‘a ná»n táº£ng (Android/iOS/Web) cho láº­p thá»i khÃ³a biá»ƒu VKU sá»­ dá»¥ng thuáº­t toÃ¡n NSGA-II Ä‘á»ƒ tá»‘i Æ°u hÃ³a lá»‹ch há»c.

## TÃ­nh nÄƒng chÃ­nh

### ğŸ  Trang chá»§
- Trang báº¯t Ä‘áº§u vá»›i giao diá»‡n thÃ¢n thiá»‡n
- NÃºt "Báº¯t Ä‘áº§u" Ä‘á»ƒ báº¯t Ä‘áº§u quy trÃ¬nh tá»‘i Æ°u hÃ³a lá»‹ch há»c

### ğŸ“š Chá»n mÃ´n há»c
- TÃ¬m kiáº¿m mÃ´n há»c theo tÃªn hoáº·c mÃ£ mÃ´n
- ÄÄƒng kÃ½/bá» Ä‘Äƒng kÃ½ mÃ´n há»c
- Hiá»ƒn thá»‹ danh sÃ¡ch mÃ´n Ä‘Ã£ chá»n

### ğŸ’¬ Nháº­p sá»Ÿ thÃ­ch
- Nháº­p sá»Ÿ thÃ­ch báº±ng tiáº¿ng Viá»‡t tá»± nhiÃªn
- Há»— trá»£ xá»­ lÃ½ ngÃ´n ngá»¯ tá»± nhiÃªn (NLP)

### âš–ï¸ Cáº¥u hÃ¬nh trá»ng sá»‘
- 6 sliders Ä‘á»ƒ Ä‘iá»u chá»‰nh trá»ng sá»‘ cho cÃ¡c tiÃªu chÃ­:
  - Giáº£ng viÃªn
  - NhÃ³m lá»›p
  - Thá»© trong tuáº§n
  - Tiáº¿t liÃªn tiáº¿p
  - NgÃ y nghá»‰
  - PhÃ²ng há»c

### ğŸ¯ Tá»‘i Æ°u hÃ³a lá»‹ch há»c
- Sá»­ dá»¥ng thuáº­t toÃ¡n NSGA-II Ä‘á»ƒ táº¡o nhiá»u phÆ°Æ¡ng Ã¡n lá»‹ch há»c
- Tá»‘i Æ°u hÃ³a Ä‘a má»¥c tiÃªu:
  - Giáº£m thiá»ƒu xung Ä‘á»™t lá»‹ch
  - Tá»‘i Ä‘a hÃ³a tá»· lá»‡ buá»•i sÃ¡ng
  - CÃ¢n báº±ng sá»‘ buá»•i há»c má»—i ngÃ y
  - Giáº£m thiá»ƒu khoáº£ng cÃ¡ch giá»¯a cÃ¡c tiáº¿t

### ğŸ“‹ Danh sÃ¡ch phÆ°Æ¡ng Ã¡n
- Hiá»ƒn thá»‹ táº¥t cáº£ cÃ¡c phÆ°Æ¡ng Ã¡n Ä‘Æ°á»£c táº¡o
- Sáº¯p xáº¿p theo: Ä‘iá»ƒm sá»‘, sá»‘ xung Ä‘á»™t, tá»· lá»‡ buá»•i sÃ¡ng, cÃ¢n báº±ng
- LÆ°u phÆ°Æ¡ng Ã¡n yÃªu thÃ­ch
- Xem chi tiáº¿t tá»«ng phÆ°Æ¡ng Ã¡n
- **Lá»‹ch sá»­ cÃ¡c láº§n táº¡o**: Khi chÆ°a cÃ³ dá»¯ liá»‡u má»›i, hiá»ƒn thá»‹ lá»‹ch sá»­ cÃ¡c láº§n táº¡o trÆ°á»›c Ä‘Ã³ vá»›i kháº£ nÄƒng má»Ÿ rá»™ng Ä‘á»ƒ xem chi tiáº¿t

### ğŸ“Š So sÃ¡nh lá»‹ch
- So sÃ¡nh 2-3 phÆ°Æ¡ng Ã¡n cÃ¹ng lÃºc
- Highlight cÃ¡c khÃ¡c biá»‡t giá»¯a cÃ¡c phÆ°Æ¡ng Ã¡n
- Hiá»ƒn thá»‹ metrics cá»§a tá»«ng phÆ°Æ¡ng Ã¡n

### ğŸ“… Lá»‹ch tuáº§n
- Hiá»ƒn thá»‹ lá»‹ch há»c theo tuáº§n vá»›i giao diá»‡n Ä‘áº¹p máº¯t
- Má»—i tiáº¿t hiá»ƒn thá»‹ riÃªng biá»‡t (1-12)
- Hiá»ƒn thá»‹ thá»i gian cá»¥ thá»ƒ (7h30, 8h30, 13h, ...)
- Hiá»ƒn thá»‹ ngÃ y trong header
- CÃ¡c buá»•i há»c nhiá»u tiáº¿t Ä‘Æ°á»£c gá»™p thÃ nh má»™t khá»‘i
- TÃªn mÃ´n há»c hiá»ƒn thá»‹ dá»c, tá»± Ä‘á»™ng xuá»‘ng dÃ²ng
- Tap vÃ o buá»•i há»c Ä‘á»ƒ xem chi tiáº¿t
- **Chá»‰nh sá»­a lá»‹ch Ä‘Ã£ lÆ°u**:
  - XÃ³a mÃ´n há»c (long press)
  - ThÃªm mÃ´n há»c má»›i (tÃ¬m kiáº¿m vÃ  nháº­p thÃ´ng tin)
  - LÆ°u thay Ä‘á»•i

### ğŸ’¾ LÆ°u vÃ  quáº£n lÃ½
- LÆ°u cÃ¡c phÆ°Æ¡ng Ã¡n yÃªu thÃ­ch
- Xem danh sÃ¡ch lá»‹ch Ä‘Ã£ lÆ°u
- XÃ³a lá»‹ch Ä‘Ã£ lÆ°u
- **Chá»‰nh sá»­a lá»‹ch Ä‘Ã£ lÆ°u**: ThÃªm/xÃ³a mÃ´n há»c vÃ  lÆ°u láº¡i

### âš™ï¸ CÃ i Ä‘áº·t
- Quáº£n lÃ½ thÃ´ng tin sinh viÃªn
- CÃ i Ä‘áº·t máº·c Ä‘á»‹nh
- Xem vÃ  quáº£n lÃ½ lá»‹ch Ä‘Ã£ lÆ°u
- XÃ³a dá»¯ liá»‡u
- ÄÄƒng xuáº¥t

## CÃ´ng nghá»‡ sá»­ dá»¥ng

- **Flutter 3.x** vá»›i Dart null-safety
- **State Management**: Riverpod (AsyncNotifierProvider, StateNotifierProvider)
- **Navigation**: GoRouter vá»›i authentication guards
- **HTTP Client**: Dio vá»›i interceptors vÃ  logging
- **Local Storage**: 
  - Hive (cho UserProfile, SavedSchedule, AppSettings)
  - SharedPreferences (cho settings)
- **UI Components**: Material Design 3
- **Date/Time**: intl package cho formatting

## Cáº¥u trÃºc dá»± Ã¡n

```
lib/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ di/                    # Dependency injection (Riverpod providers)
â”‚   â”œâ”€â”€ network/               # Dio client, interceptors, error handling
â”‚   â”œâ”€â”€ router/                # GoRouter configuration vá»›i auth guards
â”‚   â”œâ”€â”€ theme/                 # VKU theme (colors, typography)
â”‚   â”œâ”€â”€ utils/                 # Validators, helpers
â”‚   â””â”€â”€ widgets/               # Reusable widgets
â”‚       â”œâ”€â”€ bottom_nav.dart    # Bottom navigation bar (chá»‰ icon)
â”‚       â”œâ”€â”€ weekly_grid.dart   # Weekly timetable grid vá»›i merge cells
â”‚       â””â”€â”€ subject_card.dart  # Subject selection card
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ auth/                  # Authentication (Login)
â”‚   â”œâ”€â”€ home/                  # Home page (trang báº¯t Ä‘áº§u)
â”‚   â”œâ”€â”€ onboarding/            # Onboarding slides
â”‚   â”œâ”€â”€ semester/              # Semester selection
â”‚   â”œâ”€â”€ subjects/              # Subject selection vá»›i API search
â”‚   â”œâ”€â”€ preferences/           # NLP preference input
â”‚   â”œâ”€â”€ weights/               # Weight configuration
â”‚   â”œâ”€â”€ optimization/          # Optimization processing
â”‚   â”‚   â””â”€â”€ providers/
â”‚   â”‚       â”œâ”€â”€ optimization_provider.dart
â”‚   â”‚       â””â”€â”€ optimization_history_provider.dart
â”‚   â”œâ”€â”€ options/               # Schedule options list
â”‚   â”‚   â”œâ”€â”€ presentation/
â”‚   â”‚   â”‚   â”œâ”€â”€ options_list_page.dart
â”‚   â”‚   â”‚   â””â”€â”€ option_card.dart
â”‚   â”‚   â””â”€â”€ providers/
â”‚   â”‚       â”œâ”€â”€ chosen_option_provider.dart
â”‚   â”‚       â””â”€â”€ saved_schedules_provider.dart
â”‚   â”œâ”€â”€ comparison/            # Schedule comparison
â”‚   â”œâ”€â”€ timetable/             # Weekly timetable view
â”‚   â”‚   â””â”€â”€ presentation/
â”‚   â”‚       â”œâ”€â”€ weekly_timetable_page.dart
â”‚   â”‚       â””â”€â”€ add_session_page.dart
â”‚   â”œâ”€â”€ saved_schedules/       # Saved schedules management
â”‚   â””â”€â”€ settings/              # Settings & profile
â”œâ”€â”€ models/                    # Data models
â”‚   â”œâ”€â”€ schedule_option.dart   # Schedule option vá»›i metrics
â”‚   â”œâ”€â”€ session.dart           # Session/class model
â”‚   â”œâ”€â”€ optimization_history.dart
â”‚   â”œâ”€â”€ saved_schedule.dart
â”‚   â””â”€â”€ ...
â”œâ”€â”€ services/                  # Business logic
â”‚   â”œâ”€â”€ api_service.dart       # API calls (search, optimize)
â”‚   â”œâ”€â”€ optimization_service.dart
â”‚   â”œâ”€â”€ local_storage_service.dart
â”‚   â””â”€â”€ auth_service.dart
â””â”€â”€ data/                      # Repositories
    â””â”€â”€ repositories/
        â””â”€â”€ subject_repository.dart
```

## CÃ i Ä‘áº·t vÃ  cháº¡y

### YÃªu cáº§u

- Flutter SDK 3.0.0 trá»Ÿ lÃªn
- Dart 3.0.0 trá»Ÿ lÃªn
- Android Studio / VS Code vá»›i Flutter extension
- Android SDK (minSdk 23) hoáº·c Xcode (iOS 13+)

### CÃ i Ä‘áº·t dependencies

```bash
flutter pub get
```

### Cháº¡y á»©ng dá»¥ng

```bash
# Development flavor
flutter run --flavor dev

# Production flavor
flutter run --flavor prod

# Build APK
flutter build apk --flavor dev --debug
```

## Cáº¥u hÃ¬nh API

### API Endpoints

á»¨ng dá»¥ng sá»­ dá»¥ng cÃ¡c API endpoints sau:

1. **TÃ¬m kiáº¿m mÃ´n há»c**: `POST /api/search-recommend`
   - Request: `{ "query": "tÃªn mÃ´n há»c" }`
   - Response: `{ "query": "...", "results": [...] }`

2. **Tá»‘i Æ°u hÃ³a lá»‹ch**: `POST /api/convert`
   - Request: `{ "queries": [...], "prompt": "..." }`
   - Response: `{ "message": "...", "schedules": [...] }`
   - Timeout: 60 giÃ¢y

### Cáº¥u hÃ¬nh Base URL

Cáº­p nháº­t base URL trong `lib/core/network/dio_client.dart`:

```dart
// Main API
baseUrl: 'https://your-api-domain.com'

// Optimization API
baseUrl: 'http://20.106.16.223:5000'
```

### Android Configuration

Äá»ƒ cho phÃ©p HTTP traffic (cho development), Ä‘Ã£ thÃªm vÃ o `AndroidManifest.xml`:

```xml
<application
    android:usesCleartextTraffic="true"
    ...>
```

## TÃ­nh nÄƒng ná»•i báº­t

### 1. Lá»‹ch sá»­ cÃ¡c láº§n táº¡o

- Tá»± Ä‘á»™ng lÆ°u má»—i láº§n cháº¡y optimization
- Hiá»ƒn thá»‹ lá»‹ch sá»­ khi chÆ°a cÃ³ dá»¯ liá»‡u má»›i
- Expand/collapse Ä‘á»ƒ xem chi tiáº¿t cÃ¡c phÆ°Æ¡ng Ã¡n
- Má»—i láº§n táº¡o hiá»ƒn thá»‹: ngÃ y giá», sá»‘ lÆ°á»£ng phÆ°Æ¡ng Ã¡n

### 2. Chá»‰nh sá»­a lá»‹ch Ä‘Ã£ lÆ°u

- **XÃ³a mÃ´n há»c**: Long press vÃ o buá»•i há»c â†’ XÃ¡c nháº­n â†’ XÃ³a
- **ThÃªm mÃ´n há»c**: 
  - Nháº¥n nÃºt "ThÃªm mÃ´n há»c"
  - TÃ¬m kiáº¿m mÃ´n há»c
  - Nháº­p thÃ´ng tin lá»›p há»c (thá»©, tiáº¿t, giáº£ng viÃªn, phÃ²ng, ...)
  - Kiá»ƒm tra xung Ä‘á»™t tá»± Ä‘á»™ng
  - ThÃªm vÃ o lá»‹ch
- **LÆ°u thay Ä‘á»•i**: Nháº¥n nÃºt "LÆ°u" Ä‘á»ƒ cáº­p nháº­t lá»‹ch Ä‘Ã£ lÆ°u

### 3. Giao diá»‡n lá»‹ch tuáº§n

- Hiá»ƒn thá»‹ tá»«ng tiáº¿t riÃªng biá»‡t (1-12)
- Thá»i gian cá»¥ thá»ƒ: 7h30, 8h30, ..., 13h, 14h, ...
- NgÃ y trong header: "Thá»© 2\n16"
- CÃ¡c buá»•i há»c nhiá»u tiáº¿t Ä‘Æ°á»£c gá»™p thÃ nh má»™t khá»‘i
- TÃªn mÃ´n há»c hiá»ƒn thá»‹ dá»c, tá»± Ä‘á»™ng xuá»‘ng dÃ²ng khi quÃ¡ dÃ i
- Chá»‰ hiá»ƒn thá»‹ tÃªn mÃ´n, tap Ä‘á»ƒ xem chi tiáº¿t

### 4. Bottom Navigation

- 4 tabs: Home, PhÆ°Æ¡ng Ã¡n, Lá»‹ch tuáº§n, CÃ i Ä‘áº·t
- Chá»‰ hiá»ƒn thá»‹ icon, khÃ´ng cÃ³ text label
- Navigation mÆ°á»£t mÃ  vá»›i GoRouter

## Luá»“ng sá»­ dá»¥ng

1. **Báº¯t Ä‘áº§u**: VÃ o trang Home â†’ Nháº¥n "Báº¯t Ä‘áº§u"
2. **Chá»n mÃ´n há»c**: TÃ¬m kiáº¿m vÃ  chá»n cÃ¡c mÃ´n há»c muá»‘n Ä‘Äƒng kÃ½
3. **Nháº­p sá»Ÿ thÃ­ch**: Nháº­p sá»Ÿ thÃ­ch vá» lá»‹ch há»c báº±ng tiáº¿ng Viá»‡t
4. **Cáº¥u hÃ¬nh trá»ng sá»‘**: Äiá»u chá»‰nh trá»ng sá»‘ cho cÃ¡c tiÃªu chÃ­
5. **Tá»‘i Æ°u hÃ³a**: Chá» há»‡ thá»‘ng táº¡o cÃ¡c phÆ°Æ¡ng Ã¡n (30-60 giÃ¢y)
6. **Xem phÆ°Æ¡ng Ã¡n**: Xem danh sÃ¡ch, sáº¯p xáº¿p, lá»c cÃ¡c phÆ°Æ¡ng Ã¡n
7. **So sÃ¡nh**: So sÃ¡nh 2-3 phÆ°Æ¡ng Ã¡n Ä‘á»ƒ chá»n tá»‘t nháº¥t
8. **Xem lá»‹ch**: Xem lá»‹ch tuáº§n chi tiáº¿t
9. **LÆ°u**: LÆ°u phÆ°Æ¡ng Ã¡n yÃªu thÃ­ch
10. **Chá»‰nh sá»­a**: Chá»‰nh sá»­a lá»‹ch Ä‘Ã£ lÆ°u (thÃªm/xÃ³a mÃ´n há»c)

## Thuáº­t toÃ¡n NSGA-II

Thuáº­t toÃ¡n NSGA-II Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tá»‘i Æ°u hÃ³a lá»‹ch há»c:

- **Population size**: 50
- **Max generations**: 100
- **Crossover rate**: 0.8
- **Mutation rate**: 0.1

### Má»¥c tiÃªu tá»‘i Æ°u hÃ³a

1. **Minimize conflicts**: Giáº£m thiá»ƒu sá»‘ xung Ä‘á»™t lá»‹ch há»c
2. **Maximize morning ratio**: Tá»‘i Ä‘a hÃ³a tá»· lá»‡ buá»•i há»c buá»•i sÃ¡ng
3. **Maximize balance**: CÃ¢n báº±ng sá»‘ buá»•i há»c má»—i ngÃ y
4. **Minimize gap score**: Giáº£m thiá»ƒu khoáº£ng cÃ¡ch giá»¯a cÃ¡c tiáº¿t há»c

## Dá»¯ liá»‡u lÆ°u trá»¯

### Local Storage (Hive)

- **UserProfile**: ThÃ´ng tin ngÆ°á»i dÃ¹ng
- **SavedSchedule**: CÃ¡c lá»‹ch Ä‘Ã£ lÆ°u
- **AppSettings**: CÃ i Ä‘áº·t á»©ng dá»¥ng
- **OptimizationHistory**: Lá»‹ch sá»­ cÃ¡c láº§n táº¡o
- **HistoryOptions**: CÃ¡c phÆ°Æ¡ng Ã¡n cá»§a má»—i láº§n táº¡o

### SharedPreferences

- CÃ i Ä‘áº·t á»©ng dá»¥ng (theme, notifications, ...)

## Branding

### MÃ u sáº¯c VKU

- **Primary Green**: `#074B2A`
- **Primary Orange**: `#FFA000`
- **Background**: `#FFFFFF`

### Typography

- Font family: Roboto
- Há»— trá»£ Ä‘áº§y Ä‘á»§ tiáº¿ng Viá»‡t

## PhÃ¡t triá»ƒn

### Build flavors

- **dev**: Development environment
- **prod**: Production environment

### Debugging

- Logging chi tiáº¿t cho API calls
- Logging cho optimization process
- Error handling vá»›i thÃ´ng bÃ¡o tiáº¿ng Viá»‡t

## TODO / TÃ­nh nÄƒng tÆ°Æ¡ng lai

### API Integration
- [ ] TÃ­ch há»£p API láº¥y danh sÃ¡ch sessions cá»§a mÃ´n há»c
- [ ] Cáº£i thiá»‡n error handling
- [ ] Retry mechanism cho API calls

### Features
- [ ] Dark mode support
- [ ] Export lá»‹ch sang Google Calendar
- [ ] Push notifications
- [ ] Offline mode support
- [ ] Cache subjects data

### Testing
- [ ] Unit tests cho providers
- [ ] Widget tests cho UI components
- [ ] Integration tests cho flow chÃ­nh

### UI/UX
- [ ] Animations vÃ  transitions
- [ ] Responsive design cho tablet
- [ ] Accessibility improvements

## License

Copyright Â© 2024 VKU

## Contributors

- Development team

---

**LÆ°u Ã½**: á»¨ng dá»¥ng Ä‘Ã£ tÃ­ch há»£p API thá»±c cho tÃ¬m kiáº¿m mÃ´n há»c vÃ  tá»‘i Æ°u hÃ³a lá»‹ch há»c. Má»™t sá»‘ tÃ­nh nÄƒng nhÆ° Google Calendar sync váº«n Ä‘ang trong quÃ¡ trÃ¬nh phÃ¡t triá»ƒn.
